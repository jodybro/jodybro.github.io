(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8521,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let s=(0,a.createContext)(void 0);function r({children:e}){let[r,i]=(0,a.useState)([]),[n,c]=(0,a.useState)(!1),[l,u]=(0,a.useState)({x:0,y:0}),o=(0,a.useCallback)((e,t)=>{i(t=>t.includes(e)?t:[...t,e]),u(t),c(!0)},[]),h=(0,a.useCallback)(e=>{i(t=>t.filter(t=>t!==e))},[]),d=(0,a.useCallback)(()=>{i([]),c(!1)},[]),p=(0,a.useCallback)(()=>{c(!1)},[]);return(0,t.jsx)(s.Provider,{value:{selectedTags:r,addTag:o,removeTag:h,clearTags:d,isPopupVisible:n,popupPosition:l,hidePopup:p},children:e})}function i(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useTagSearch must be used within a TagSearchProvider");return e}e.s(["TagSearchProvider",()=>r,"useTagSearch",()=>i])},18566,(e,t,a)=>{t.exports=e.r(76562)},11414,e=>{"use strict";var t=e.i(43476),a=e.i(8521),s=e.i(71645),r=e.i(18566);function i(){let{selectedTags:e,removeTag:i,clearTags:n,isPopupVisible:c,popupPosition:l,hidePopup:u}=(0,a.useTagSearch)(),o=(0,r.useRouter)(),h=(0,s.useRef)(null),[d,p]=(0,s.useState)({x:0,y:0});(0,s.useEffect)(()=>{if(c&&h.current){let e=h.current.getBoundingClientRect(),t=window.innerWidth,a=window.innerHeight,s=l.x+10,r=l.y+10;s+e.width>t-20&&(s=l.x-e.width-10),r+e.height>a-20&&(r=l.y-e.height-10),p({x:s=Math.max(10,s),y:r=Math.max(10,r)})}},[c,l,e]),(0,s.useEffect)(()=>{if(!c)return;let e=e=>{h.current&&!h.current.contains(e.target)&&setTimeout(()=>u(),50)},t=setTimeout(()=>{document.addEventListener("mousedown",e)},100);return()=>{clearTimeout(t),document.removeEventListener("mousedown",e)}},[c,u]),(0,s.useEffect)(()=>{if(!c)return;let e=e=>{"Escape"===e.key&&u()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,u]);let g=(0,s.useCallback)(()=>{let t=new URLSearchParams;e.forEach(e=>t.append("tags",e)),o.push(`/search/?${t.toString()}`),u()},[e,o,u]),m=(0,s.useCallback)(()=>{n()},[n]);return c&&0!==e.length?(0,t.jsxs)("div",{ref:h,className:"tag-search-popup",style:{left:`${d.x}px`,top:`${d.y}px`},role:"dialog","aria-label":"Search with selected tags",children:[(0,t.jsxs)("div",{className:"tag-search-popup-header",children:[(0,t.jsxs)("span",{className:"tag-search-popup-title",children:[(0,t.jsx)("i",{className:"bi bi-tags me-2","aria-hidden":"true"}),e.length," tag",1!==e.length?"s":""," selected"]}),(0,t.jsx)("button",{type:"button",className:"tag-search-popup-close",onClick:u,"aria-label":"Close popup",children:(0,t.jsx)("i",{className:"bi bi-x-lg","aria-hidden":"true"})})]}),(0,t.jsx)("div",{className:"tag-search-popup-tags",children:e.map(e=>(0,t.jsxs)("span",{className:"tag-search-popup-tag",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>i(e),className:"tag-search-popup-tag-remove","aria-label":`Remove ${e}`,children:(0,t.jsx)("i",{className:"bi bi-x","aria-hidden":"true"})})]},e))}),(0,t.jsxs)("div",{className:"tag-search-popup-actions",children:[(0,t.jsx)("button",{type:"button",className:"tag-search-popup-btn tag-search-popup-btn-secondary",onClick:m,children:"Clear All"}),(0,t.jsxs)("button",{type:"button",className:"tag-search-popup-btn tag-search-popup-btn-primary",onClick:g,children:[(0,t.jsx)("i",{className:"bi bi-search me-1","aria-hidden":"true"}),"Search"]})]})]}):null}function n({children:e}){return(0,t.jsxs)(a.TagSearchProvider,{children:[e,(0,t.jsx)(i,{})]})}e.s(["default",()=>n],11414)}]);