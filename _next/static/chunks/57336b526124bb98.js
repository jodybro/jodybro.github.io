(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},98183,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={assign:function(){return l},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});function n(e){let t={};for(let[s,r]of e.entries()){let e=t[s];void 0===e?t[s]=r:Array.isArray(e)?e.push(r):t[s]=[e,r]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[s,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)t.append(s,i(e));else t.set(s,i(r));return t}function l(e,...t){for(let s of t){for(let t of s.keys())e.delete(t);for(let[t,r]of s.entries())e.append(t,r)}return e}},95057,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={formatUrl:function(){return o},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(90809)._(e.r(98183)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:s}=e,r=e.protocol||"",a=e.pathname||"",o=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:s&&(c=t+(~s.indexOf(":")?`[${s}]`:s),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let d=e.search||l&&`?${l}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||i.test(r))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),o&&"#"!==o[0]&&(o="#"+o),d&&"?"!==d[0]&&(d="?"+d),a=a.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${r}${c}${a}${d}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return o(e)}},18581,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=e.r(71645);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=n(e,r)),t&&(a.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18967,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return j},NormalizeError:function(){return b},PageNotFoundError:function(){return v},SP:function(){return f},ST:function(){return g},WEB_VITALS:function(){return n},execOnce:function(){return i},getDisplayName:function(){return m},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return l},isResSent:function(){return u},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return w}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,s=!1;return(...r)=>(s||(s=!0,t=e(...r)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function c(){let{protocol:e,hostname:t,port:s}=window.location;return`${e}//${t}${s?":"+s:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function m(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let s=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(s&&u(s))return r;if(!r)throw Object.defineProperty(Error(`"${m(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let f="u">typeof performance,g=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class b extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"isLocalURL",{enumerable:!0,get:function(){return n}});let r=e.r(18967),a=e.r(52817);function n(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),s=new URL(e,t);return s.origin===t&&(0,a.hasBasePath)(s.pathname)}catch(e){return!1}}},84508,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},22016,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return x},useLinkStatus:function(){return v}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(90809),i=e.r(43476),o=n._(e.r(71645)),l=e.r(95057),c=e.r(8372),d=e.r(18581),m=e.r(18967),u=e.r(84395);e.r(33525);let h=e.r(91949),p=e.r(73668),f=e.r(9396);function g(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function x(t){var s;let r,a,n,[l,x]=(0,o.useOptimistic)(h.IDLE_LINK_STATUS),v=(0,o.useRef)(null),{href:j,as:y,children:w,prefetch:N=null,passHref:k,replace:C,shallow:S,scroll:_,onClick:E,onMouseEnter:T,onTouchStart:A,legacyBehavior:P=!1,onNavigate:D,ref:I,unstable_dynamicOnHover:O,...R}=t;r=w,P&&("string"==typeof r||"number"==typeof r)&&(r=(0,i.jsx)("a",{children:r}));let M=o.default.useContext(c.AppRouterContext),L=!1!==N,$=!1!==N?null===(s=N)||"auto"===s?f.FetchStrategy.PPR:f.FetchStrategy.Full:f.FetchStrategy.PPR,{href:K,as:B}=o.default.useMemo(()=>{let e=g(j);return{href:e,as:y?g(y):e}},[j,y]);if(P){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=o.default.Children.only(r)}let z=P?a&&"object"==typeof a&&a.ref:I,U=o.default.useCallback(e=>(null!==M&&(v.current=(0,h.mountLinkInstance)(e,K,M,$,L,x)),()=>{v.current&&((0,h.unmountLinkForCurrentNavigation)(v.current),v.current=null),(0,h.unmountPrefetchableInstance)(e)}),[L,K,M,$,x]),F={ref:(0,d.useMergedRef)(U,z),onClick(t){P||"function"!=typeof E||E(t),P&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!M||t.defaultPrevented||function(t,s,r,a,n,i,l){if("u">typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(s)){n&&(t.preventDefault(),location.replace(s));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:m}=e.r(99781);o.default.startTransition(()=>{m(r||s,n?"replace":"push",i??!0,a.current)})}}(t,K,B,v,C,_,D)},onMouseEnter(e){P||"function"!=typeof T||T(e),P&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),M&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===O)},onTouchStart:function(e){P||"function"!=typeof A||A(e),P&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),M&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===O)}};return(0,m.isAbsoluteUrl)(B)?F.href=B:P&&!k&&("a"!==a.type||"href"in a.props)||(F.href=(0,u.addBasePath)(B)),n=P?o.default.cloneElement(a,F):(0,i.jsx)("a",{...R,...F,children:r}),(0,i.jsx)(b.Provider,{value:l,children:n})}e.r(84508);let b=(0,o.createContext)(h.IDLE_LINK_STATUS),v=()=>(0,o.useContext)(b);("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18178,e=>{"use strict";let t={author:{name:"Amar Sattaur",email:"ajodasattaur@gmail.com",github:"https://github.com/jodybro",githubHandle:"github.com/jodybro",linkedin:"https://linkedin.com/in/amar-sattaur",linkedinHandle:"linkedin.com/in/amar-sattaur"},title:"Staff DevOps & Platform Engineer",descriptions:{full:"Staff-level DevOps and Platform Engineer with deep expertise in Kubernetes orchestration, CI/CD pipeline architecture, and cloud infrastructure automation. Specializing in EKS, ArgoCD, Terraform, and cross-cloud migrations.",short:"Staff-level DevOps and Platform Engineer specializing in Kubernetes orchestration, CI/CD pipeline architecture, and cloud infrastructure automation.",hero:"Deep expertise in Kubernetes orchestration, CI/CD pipeline architecture, and cloud infrastructure automation. Technical leader with hands-on implementation skills.",about:"I'm a Staff-level DevOps and Platform Engineer with deep expertise in Kubernetes orchestration, CI/CD pipeline architecture, and cloud infrastructure automation. I have a proven track record of executing zero-downtime EKS cluster upgrades across multiple major versions and leading cross-cloud migrations.",terminal:`Amar Sattaur
Staff DevOps & Platform Engineer

I specialize in Kubernetes orchestration, CI/CD pipeline
architecture, and cloud infrastructure automation.

Technical leader with hands-on implementation skills and
the ability to communicate with executive stakeholders.`},site:{url:"https://jodybro.github.io",name:"Amar Sattaur Portfolio"},employer:{name:"Mogo Financial"},keywords:["DevOps Engineer","Platform Engineer","Staff Engineer","Kubernetes","EKS","ArgoCD","Terraform","AWS","GCP","Oracle Cloud","CI/CD","Infrastructure","SRE","GitHub Actions"],knowsAbout:["Kubernetes","Amazon EKS","Google GKE","ArgoCD","Terraform","GitHub Actions","CI/CD","DevOps","Platform Engineering","Cloud Infrastructure","AWS","GCP","Oracle Cloud"]};e.s(["featureFlags",0,{learning:!1},"siteConfig",0,t])},12395,e=>{"use strict";let t=[{slug:"zero-downtime-eks-upgrades",title:"Zero-Downtime EKS Upgrades: A Complete Guide",excerpt:"Learn how to upgrade EKS clusters across multiple major versions while maintaining 100% uptime. Covers API deprecation audits, Helm chart migrations, and validation procedures.",date:"January 2025",dateValue:new Date("2025-01-15"),readTime:"12 min read",readTimeMinutes:12,tags:["Kubernetes","EKS","DevOps"],icon:"bi-journal-code"},{slug:"reusable-github-actions-workflows",title:"Building Reusable GitHub Actions Workflows",excerpt:"How to design CI/CD pipeline frameworks that reduce onboarding time from days to hours. Includes Docker layer caching, conditional triggers, and GHCR publishing patterns.",date:"December 2024",dateValue:new Date("2024-12-15"),readTime:"8 min read",readTimeMinutes:8,tags:["GitHub Actions","CI/CD","Automation"],icon:"bi-gear-wide-connected"},{slug:"argocd-multi-cluster-patterns",title:"ArgoCD Multi-Cluster Deployment Patterns",excerpt:"Architecting centralized GitOps governance using the control plane model for managing multiple downstream ArgoCD instances across environments.",date:"November 2024",dateValue:new Date("2024-11-15"),readTime:"10 min read",readTimeMinutes:10,tags:["ArgoCD","GitOps","Kubernetes"],icon:"bi-diagram-3"},{slug:"terraform-state-management-at-scale",title:"Terraform State Management at Scale",excerpt:"Strategies for managing Terraform state across dozens of environments and teams. Covers remote backends, state locking, workspace patterns, and safe state migration techniques.",date:"February 2025",dateValue:new Date("2025-02-15"),readTime:"10 min read",readTimeMinutes:10,tags:["Terraform","IaC","DevOps"],icon:"bi-hdd-stack"}],s=[{title:"AWS to Oracle Cloud Migration",company:"FinTech Company",challenge:"Migrate entire production infrastructure from AWS to Oracle Cloud Infrastructure with minimal downtime and no service disruption.",solution:"Designed comprehensive migration strategy including parallel infrastructure provisioning, data synchronization, and phased cutover procedures. Implemented Terraform modules for OCI resources and established network connectivity between clouds during transition.",results:["Zero unplanned downtime during migration","30% reduction in infrastructure costs","Improved disaster recovery posture"],technologies:["AWS","Oracle Cloud","Terraform","Kubernetes","ArgoCD"],icon:"bi-cloud-arrow-up"},{title:"CI/CD Pipeline Standardization",company:"Multiple Organizations",challenge:"Development teams spending days configuring CI/CD pipelines for new services, leading to inconsistent deployments and security gaps.",solution:"Built reusable GitHub Actions workflow templates with built-in security scanning, Docker layer caching, and automated versioning. Created comprehensive documentation and self-service onboarding guides.",results:["Service onboarding reduced from days to hours","35% faster build times","Consistent security posture across all services"],technologies:["GitHub Actions","Docker","semantic-release","Trivy"],icon:"bi-arrow-repeat"},{title:"Kubernetes Platform Modernization",company:"E-commerce SaaS Company",challenge:"Legacy deployment process using raw kubectl commands with no GitOps practices, leading to configuration drift and deployment failures.",solution:"Implemented self-managed ArgoCD with application sets, authored base Helm charts with JSON Schema validation, and established GitOps workflows with automated image updates.",results:["100% GitOps adoption across teams","90% reduction in deployment-related incidents","Automated rollbacks and audit trails"],technologies:["ArgoCD","Helm","Kubernetes","CircleCI"],icon:"bi-rocket-takeoff"}];function r(){let e=new Set;return t.forEach(t=>t.tags.forEach(t=>e.add(t))),s.forEach(t=>t.technologies.forEach(t=>e.add(t))),Array.from(e).sort()}e.s(["blogPosts",0,t,"caseStudies",0,s,"courses",0,[{slug:"debugging-kubernetes-issues",title:"Debugging Kubernetes Issues",description:"Master the art of troubleshooting Kubernetes clusters with hands-on practice. Learn to diagnose and fix common and uncommon issues that plague production environments, from pod scheduling failures to network connectivity problems.",topics:["Pod debugging with kubectl describe and logs","Understanding crash loops and OOMKilled events","Network policy troubleshooting","DNS resolution issues in clusters","Node resource pressure and evictions","RBAC permission debugging","Persistent volume claim issues","Init container and sidecar debugging"],level:"Intermediate",duration:"4-6 hours",tags:["Kubernetes","Debugging","DevOps"],icon:"bi-bug",status:"coming-soon",interactive:{type:"terminal",description:"Practice in your own isolated Kubernetes cluster powered by vCluster - no local setup required"}},{slug:"terminal-productivity",title:"Terminal Power User Workshop",description:"Transform your terminal into a productivity powerhouse. Learn the commands, shortcuts, and workflows that experienced engineers use to get things done fast.",topics:["Essential shell shortcuts and keybindings","Mastering grep, awk, sed, and jq","Building powerful one-liners and pipelines","tmux for session management","Customizing your shell (bash/zsh) for speed","Fuzzy finding with fzf","Git workflows from the terminal","kubectl and cloud CLI productivity tips"],level:"Beginner",duration:"3-4 hours",tags:["Terminal","Productivity","DevOps"],icon:"bi-terminal",status:"coming-soon"},{slug:"real-gitops-strategy",title:"Real GitOps: Image Promotion Done Right",description:"Stop rebuilding containers between environments. Learn how a proper GitOps strategy works by promoting the same image through dev, QA, RC, and production using image retagging instead of manual tag changes.",topics:["Why rebuilding containers defeats GitOps","Image immutability and promotion pipelines","Implementing dev → QA → RC → prod workflows","ArgoCD Image Updater configuration","Semantic versioning for container images","Registry mirroring and promotion strategies","Environment-specific configurations vs image changes","Audit trails and rollback strategies"],level:"Advanced",duration:"5-6 hours",tags:["GitOps","CI/CD","Kubernetes","ArgoCD"],icon:"bi-git",status:"coming-soon"}],"getAllTags",()=>r])},62319,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(22016),a=e.i(18178),n=e.i(12395);function i({activePage:e="home"}){let[i,o]=(0,s.useState)(!0),[l,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(""),[u,h]=(0,s.useState)([]),p=(0,s.useRef)(null),f=(0,s.useRef)(null),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)(!1),w=(0,s.useCallback)(()=>{x(!1),v(!1),y(!1)},[]),N=(0,s.useMemo)(()=>(0,n.getAllTags)(),[]),k=(0,s.useMemo)(()=>{let e=d.toLowerCase().trim(),t=[];return n.blogPosts.forEach(s=>{let r=!e||s.title.toLowerCase().includes(e)||s.excerpt.toLowerCase().includes(e)||s.tags.some(t=>t.toLowerCase().includes(e)),a=0===u.length||u.some(e=>s.tags.includes(e));r&&a&&t.push({type:"blog",title:s.title,description:s.excerpt,tags:s.tags,link:`/blog/${s.slug}`,icon:s.icon})}),n.caseStudies.forEach(s=>{let r=!e||s.title.toLowerCase().includes(e)||s.challenge.toLowerCase().includes(e)||s.technologies.some(t=>t.toLowerCase().includes(e)),a=0===u.length||u.some(e=>s.technologies.includes(e));r&&a&&t.push({type:"case-study",title:s.title,description:s.challenge,tags:s.technologies,link:"/#case-studies",icon:s.icon})}),t},[d,u]),C=(0,s.useCallback)(e=>{h(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]);(0,s.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&y(!1)},t=e=>{"Escape"===e.key&&y(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[]),(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&o("dark"===e)},[]),(0,s.useEffect)(()=>{document.documentElement.setAttribute("data-theme",i?"dark":"light"),localStorage.setItem("theme",i?"dark":"light")},[i]);let S=(0,s.useCallback)(()=>{o(e=>!e)},[]),_="home"===e;return(0,t.jsx)("nav",{className:"navbar navbar-expand-lg fixed-top",children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)(r.default,{className:"navbar-brand text-info",href:"/",children:[(0,t.jsx)("i",{className:"bi bi-terminal me-2"}),"amarsattaur"]}),(0,t.jsx)("button",{className:"navbar-toggler border-0",type:"button","aria-controls":"navbarNav","aria-expanded":g,"aria-label":"Toggle navigation",onClick:()=>x(e=>!e),children:(0,t.jsx)("i",{className:"bi bi-list toggler-icon fs-4"})}),(0,t.jsxs)("div",{className:`navbar-collapse ${g?"d-block":"d-none d-lg-flex"}`,id:"navbarNav",children:[(0,t.jsxs)("ul",{className:"navbar-nav ms-auto nav-compact",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r.default,{className:`nav-link ${"home"===e?"active":""}`,href:_?"#about":"/#about",onClick:w,children:"About"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r.default,{className:"nav-link",href:_?"#experience":"/#experience",onClick:w,children:"Experience"})}),(0,t.jsxs)("li",{className:"nav-item dropdown",children:[(0,t.jsx)("button",{className:`nav-link dropdown-toggle btn btn-link ${"blog"===e?"active":""}`,type:"button","aria-expanded":b,onClick:()=>v(e=>!e),children:"Content"}),(0,t.jsxs)("ul",{className:`dropdown-menu ${b?"show":""}`,children:[(0,t.jsx)("li",{children:(0,t.jsxs)(r.default,{className:"dropdown-item",href:"/blog",onClick:w,children:[(0,t.jsx)("i",{className:"bi bi-journal-text me-2"}),"Blog"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)(r.default,{className:"dropdown-item",href:_?"#case-studies":"/#case-studies",onClick:w,children:[(0,t.jsx)("i",{className:"bi bi-briefcase me-2"}),"Case Studies"]})})]})]}),a.featureFlags.learning&&(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r.default,{className:`nav-link ${"learning"===e?"active":""}`,href:"/learning",onClick:w,children:"Learning"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r.default,{className:`nav-link ${"incidents"===e?"active":""}`,href:"/incidents",onClick:w,children:"Incidents"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(r.default,{className:"nav-link",href:_?"#contact":"/#contact",onClick:w,children:"Contact"})})]}),(0,t.jsxs)("div",{className:"search-container ms-lg-2 mt-3 mt-lg-0",ref:p,children:[(0,t.jsx)("button",{className:"btn nav-icon-btn",onClick:()=>c(!l),"aria-label":"Search",children:(0,t.jsx)("i",{className:"bi bi-search"})}),l&&(0,t.jsxs)("div",{className:"search-dropdown",children:[(0,t.jsxs)("div",{className:"search-input-container",children:[(0,t.jsx)("i",{className:"bi bi-search search-icon"}),(0,t.jsx)("input",{type:"text",className:"search-input-full",placeholder:"Search posts & case studies...",value:d,onChange:e=>m(e.target.value),autoFocus:!0}),(d||u.length>0)&&(0,t.jsx)("button",{className:"search-clear",onClick:()=>{m(""),h([])},"aria-label":"Clear search and filters",title:"Clear search and filters",children:(0,t.jsx)("i",{className:"bi bi-x","aria-hidden":"true"})})]}),(0,t.jsxs)("div",{className:"search-tags",children:[(0,t.jsx)("span",{className:"search-tags-label",children:"Filter by tag:"}),(0,t.jsx)("div",{className:"search-tags-list",children:N.map(e=>(0,t.jsx)("button",{className:`search-tag ${u.includes(e)?"active":""}`,onClick:()=>C(e),children:e},e))})]}),(0,t.jsxs)(r.default,{href:`/search${u.length>0?`?tags=${u.join(",")}`:""}${d?`${u.length>0?"&":"?"}q=${encodeURIComponent(d)}`:""}`,className:"search-view-all-primary",onClick:()=>c(!1),children:[(0,t.jsx)("i",{className:"bi bi-grid-3x3-gap me-2"}),"View All Posts & Case Studies",(0,t.jsx)("i",{className:"bi bi-arrow-right ms-2"})]}),(0,t.jsx)("div",{className:"search-results",children:k.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"search-results-label",children:[k.length," ",1===k.length?"result":"results"," found"]}),k.slice(0,3).map((e,s)=>(0,t.jsxs)(r.default,{href:e.link,className:"search-result-item",onClick:()=>c(!1),children:[(0,t.jsx)("div",{className:"search-result-icon",children:(0,t.jsx)("i",{className:`bi ${e.icon}`})}),(0,t.jsxs)("div",{className:"search-result-content",children:[(0,t.jsx)("div",{className:"search-result-type",children:"blog"===e.type?"Blog Post":"Case Study"}),(0,t.jsx)("div",{className:"search-result-title",children:e.title}),(0,t.jsx)("div",{className:"search-result-description",children:e.description}),(0,t.jsx)("div",{className:"search-result-tags",children:e.tags.slice(0,3).map(e=>(0,t.jsx)("span",{className:"search-result-tag",children:e},e))})]})]},s))]}):(0,t.jsxs)("div",{className:"search-no-results",children:[(0,t.jsx)("i",{className:"bi bi-search me-2"}),d||u.length>0?"No results found":"Type to search or select tags to filter"]})})]})]}),(0,t.jsx)("button",{onClick:S,className:"btn nav-icon-btn ms-lg-2 mt-3 mt-lg-0","aria-label":"Toggle theme",children:(0,t.jsx)("i",{className:`bi ${i?"bi-sun":"bi-moon-stars"}`})}),(0,t.jsxs)("div",{className:"dropdown ms-lg-2 mt-3 mt-lg-0 resume-dropdown",ref:f,children:[(0,t.jsxs)("button",{type:"button",className:"btn btn-resume dropdown-toggle","aria-expanded":j,onClick:()=>y(e=>!e),children:[(0,t.jsx)("i",{className:"bi bi-file-earmark-text me-1"}),"Resume"]}),(0,t.jsxs)("ul",{className:`dropdown-menu dropdown-menu-end ${j?"show":""}`,children:[(0,t.jsx)("li",{children:(0,t.jsxs)(r.default,{className:"dropdown-item",href:"/resume",onClick:w,children:[(0,t.jsx)("i",{className:"bi bi-eye me-2"}),"View"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)("a",{className:"dropdown-item",href:"/Amar_Sattaur_Resume.pdf",download:!0,onClick:w,children:[(0,t.jsx)("i",{className:"bi bi-download me-2"}),"Download"]})})]})]})]})]})})}e.s(["default",()=>i])},60227,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(8521);function a({tag:e,variant:a="default",className:n=""}){let{addTag:i,selectedTags:o}=(0,r.useTagSearch)(),l=(0,s.useCallback)(t=>{t.preventDefault(),t.stopPropagation(),i(e,{x:t.clientX,y:t.clientY})},[i,e]),c=o.includes(e),d=c?"tech-badge-selected":"";return(0,t.jsxs)("button",{type:"button",onClick:l,className:`tech-badge tech-badge-clickable ${"green"===a?"tech-badge-green":""} ${d} ${n}`.trim(),"aria-label":`Add ${e} to search filters`,title:c?`${e} (already selected)`:`Click to search for ${e}`,children:[e,c&&(0,t.jsx)("i",{className:"bi bi-check-lg ms-1","aria-hidden":"true"})]})}e.s(["default",()=>a])},23422,55132,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r({targetSelector:e=".blog-content"}){let[r,a]=(0,s.useState)(0),[n,i]=(0,s.useState)(!1),o=(0,s.useCallback)(()=>{let t=document.querySelector(e);if(!t)return;let s=t.getBoundingClientRect(),r=window.scrollY,n=s.top+r,o=s.height,l=window.innerHeight,c=document.documentElement.scrollHeight,d=n-l,m=n+o-l;r<=d?(a(0),i(!1)):(r+l>=c-10||r>=m?a(100):a(Math.min(Math.max((r-d)/(m-d)*100,0),100)),i(!0))},[e]);return((0,s.useEffect)(()=>(o(),window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}),[o]),n)?(0,t.jsx)("div",{className:"reading-progress-container","aria-hidden":"true",children:(0,t.jsx)("div",{className:"reading-progress-bar",style:{width:`${r}%`},role:"progressbar","aria-valuenow":Math.round(r),"aria-valuemin":0,"aria-valuemax":100})}):null}function a({contentSelector:e=".blog-content"}){let[r,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(""),[o,l]=(0,s.useState)(0);(0,s.useEffect)(()=>{let t=document.querySelector(e);if(!t)return;let s=t.querySelectorAll("h2, h3"),r=[];s.forEach((e,t)=>{e.id||(e.id=`heading-${t}`),r.push({id:e.id,text:e.textContent||"",level:parseInt(e.tagName.charAt(1))})}),a(r)},[e]);let c=(0,s.useCallback)(()=>{if(0===r.length)return;let t=window.scrollY+150,s="";for(let e=r.length-1;e>=0;e--){let a=document.getElementById(r[e].id);if(a&&a.offsetTop<=t){s=r[e].id;break}}i(s);let a=document.querySelector(e);if(a){let e=a.getBoundingClientRect(),t=window.scrollY,s=e.top+t,r=e.height,n=window.innerHeight,i=document.documentElement.scrollHeight,o=s-n,c=s+r-n,d=0;t+n>=i-10||t>=c?d=100:t>o&&(d=Math.min(Math.max((t-o)/(c-o)*100,0),100)),l(Math.round(d))}},[r,e]);return((0,s.useEffect)(()=>(window.addEventListener("scroll",c,{passive:!0}),c(),()=>{window.removeEventListener("scroll",c)}),[c]),0===r.length)?null:(0,t.jsx)("nav",{className:"toc-container","aria-label":"Table of Contents",children:(0,t.jsxs)("div",{className:"custom-card p-3",children:[(0,t.jsxs)("h2",{className:"toc-title",children:[(0,t.jsx)("i",{className:"bi bi-list-ul me-2"}),"On This Page"]}),(0,t.jsx)("ul",{className:"toc-list",children:r.map(e=>(0,t.jsx)("li",{className:"toc-item",children:(0,t.jsx)("button",{onClick:()=>(e=>{let t=document.getElementById(e);if(t){let e=t.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:e-100,behavior:"smooth"})}})(e.id),className:`toc-link ${3===e.level?"toc-link-h3":""} ${n===e.id?"active":""}`,children:e.text})},e.id))}),(0,t.jsxs)("div",{className:"toc-progress",children:[(0,t.jsx)("i",{className:"bi bi-book me-2"}),o,"% read"]})]})})}e.s(["default",()=>r],23422),e.s(["default",()=>a],55132)},64714,e=>{"use strict";var t=e.i(43476),s=e.i(22016),r=e.i(18178),a=e.i(62319),n=e.i(60227),i=e.i(23422),o=e.i(55132);function l(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.default,{activePage:"blog"}),(0,t.jsx)(i.default,{}),(0,t.jsx)("article",{className:"py-5",style:{paddingTop:"120px"},children:(0,t.jsx)("div",{className:"container py-5",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-lg-3 d-none d-lg-block",children:(0,t.jsx)(o.default,{})}),(0,t.jsxs)("div",{className:"col-lg-8",children:[(0,t.jsx)("nav",{"aria-label":"breadcrumb",className:"mb-4",children:(0,t.jsxs)("ol",{className:"breadcrumb",children:[(0,t.jsx)("li",{className:"breadcrumb-item",children:(0,t.jsx)(s.default,{href:"/",className:"text-info",children:"Home"})}),(0,t.jsx)("li",{className:"breadcrumb-item",children:(0,t.jsx)(s.default,{href:"/blog",className:"text-info",children:"Blog"})}),(0,t.jsx)("li",{className:"breadcrumb-item active text-secondary",children:"Terraform State at Scale"})]})}),(0,t.jsxs)("header",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"d-flex flex-wrap gap-2 mb-3",children:[(0,t.jsx)(n.default,{tag:"Terraform"}),(0,t.jsx)(n.default,{tag:"IaC"}),(0,t.jsx)(n.default,{tag:"DevOps"}),(0,t.jsx)(n.default,{tag:"AWS"})]}),(0,t.jsx)("h1",{className:"display-5 fw-bold mb-3",children:"Terraform State Management at Scale"}),(0,t.jsxs)("div",{className:"d-flex align-items-center text-secondary",children:[(0,t.jsx)("span",{children:"February 2025"}),(0,t.jsx)("span",{className:"mx-2",children:"•"}),(0,t.jsx)("span",{children:"10 min read"})]})]}),(0,t.jsxs)("div",{className:"blog-content",children:[(0,t.jsx)("p",{className:"lead text-secondary mb-4",children:"Terraform state is straightforward when you have a single team managing a handful of resources. It becomes a minefield when you scale to dozens of environments, multiple teams, and thousands of resources. This post covers the patterns and practices that keep state manageable at scale."}),(0,t.jsx)("h2",{id:"the-problem",className:"h3 mt-5 mb-3 text-info",children:"The Problem with State at Scale"}),(0,t.jsx)("p",{className:"text-secondary",children:"Every Terraform deployment maintains a state file that maps your configuration to real-world resources. When organizations grow, common state-related problems emerge:"}),(0,t.jsxs)("ul",{className:"text-secondary",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"State collisions:"})," Two engineers running ",(0,t.jsx)("code",{children:"terraform apply"})," simultaneously, corrupting state"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Monolithic state:"})," A single state file tracking thousands of resources, making plans slow and risky"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Environment drift:"})," No clear separation between dev, staging, and production state"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Access control gaps:"})," Everyone having write access to production state"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Migration pain:"})," Moving resources between state files without destroying and recreating them"]})]}),(0,t.jsx)("h2",{id:"remote-backend-setup",className:"h3 mt-5 mb-3 text-info",children:"Remote Backend Setup"}),(0,t.jsx)("p",{className:"text-secondary",children:"The first step is moving from local state to a remote backend. For AWS environments, S3 with DynamoDB locking is the standard pattern."}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"backend.tf"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`terraform {
  backend "s3" {
    bucket         = "acme-terraform-state"
    key            = "networking/vpc/terraform.tfstate"
    region         = "us-east-1"
    encrypt        = true
    dynamodb_table = "terraform-state-locks"
    # Use separate AWS profile for state access
    profile        = "terraform-state"
  }
}`})})]}),(0,t.jsx)("h3",{id:"bootstrap-the-backend",className:"h5 mt-4 mb-3",children:"Bootstrapping the Backend"}),(0,t.jsx)("p",{className:"text-secondary",children:"There's a chicken-and-egg problem: you need infrastructure to store state, but you use Terraform to create infrastructure. The solution is a small bootstrap module that creates the state resources themselves."}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"bootstrap/main.tf"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`# This module uses local state intentionally.
# Run once, then store its state in version control.

resource "aws_s3_bucket" "terraform_state" {
  bucket = "acme-terraform-state"

  lifecycle {
    prevent_destroy = true
  }
}

resource "aws_s3_bucket_versioning" "terraform_state" {
  bucket = aws_s3_bucket.terraform_state.id
  versioning_configuration {
    status = "Enabled"
  }
}

resource "aws_s3_bucket_server_side_encryption_configuration" "terraform_state" {
  bucket = aws_s3_bucket.terraform_state.id
  rule {
    apply_server_side_encryption_by_default {
      sse_algorithm = "aws:kms"
    }
  }
}

resource "aws_dynamodb_table" "terraform_locks" {
  name         = "terraform-state-locks"
  billing_mode = "PAY_PER_REQUEST"
  hash_key     = "LockID"

  attribute {
    name = "LockID"
    type = "S"
  }
}`})})]}),(0,t.jsx)("p",{className:"text-secondary",children:"Key details: S3 versioning lets you recover from corrupted state by rolling back to a previous version. KMS encryption protects secrets stored in state. The DynamoDB table provides distributed locking to prevent concurrent modifications."}),(0,t.jsx)("h2",{id:"state-decomposition",className:"h3 mt-5 mb-3 text-info",children:"State Decomposition Strategies"}),(0,t.jsxs)("p",{className:"text-secondary",children:["A monolithic state file is the single biggest scaling bottleneck. When one state file tracks your VPC, EKS cluster, databases, and application configs, a ",(0,t.jsx)("code",{children:"terraform plan"})," takes minutes and a failed apply can block every team."]}),(0,t.jsx)("h3",{id:"split-by-lifecycle",className:"h5 mt-4 mb-3",children:"Split by Lifecycle"}),(0,t.jsx)("p",{className:"text-secondary",children:"Group resources by how often they change and who changes them:"}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"Recommended directory structure"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`infrastructure/
├── bootstrap/              # State backend (local state, committed)
├── networking/
│   ├── vpc/                # VPC, subnets, route tables (rarely changes)
│   └── dns/                # Route53 zones, records
├── platform/
│   ├── eks/                # EKS cluster, node groups
│   ├── rds/                # Database instances
│   └── elasticache/        # Redis/Memcached clusters
├── security/
│   ├── iam/                # IAM roles, policies
│   └── kms/                # Encryption keys
└── services/
    ├── api-gateway/        # API Gateway configs (changes frequently)
    └── lambda/             # Lambda functions`})})]}),(0,t.jsxs)("p",{className:"text-secondary",children:["Each directory is a separate Terraform root module with its own state file. The ",(0,t.jsx)("code",{children:"networking/vpc"})," state might change quarterly, while ",(0,t.jsx)("code",{children:"services/api-gateway"})," changes weekly. This isolation means a team updating Lambda functions never risks blocking the networking team."]}),(0,t.jsx)("h3",{id:"cross-state-references",className:"h5 mt-4 mb-3",children:"Cross-State References"}),(0,t.jsxs)("p",{className:"text-secondary",children:["When modules are split, they still need to reference each other. Use ",(0,t.jsx)("code",{children:"terraform_remote_state"})," data sources or, better yet, SSM Parameter Store for loose coupling."]}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"Option A: terraform_remote_state"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`# In platform/eks/main.tf - read VPC outputs
data "terraform_remote_state" "vpc" {
  backend = "s3"
  config = {
    bucket = "acme-terraform-state"
    key    = "networking/vpc/terraform.tfstate"
    region = "us-east-1"
  }
}

resource "aws_eks_cluster" "main" {
  name     = "acme-production"
  role_arn = var.cluster_role_arn

  vpc_config {
    subnet_ids = data.terraform_remote_state.vpc.outputs.private_subnet_ids
  }
}`})})]}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"Option B: SSM Parameter Store (preferred)"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`# In networking/vpc/outputs.tf - publish to SSM
resource "aws_ssm_parameter" "vpc_id" {
  name  = "/infrastructure/networking/vpc_id"
  type  = "String"
  value = aws_vpc.main.id
}

resource "aws_ssm_parameter" "private_subnets" {
  name  = "/infrastructure/networking/private_subnet_ids"
  type  = "StringList"
  value = join(",", aws_subnet.private[*].id)
}

# In platform/eks/main.tf - read from SSM
data "aws_ssm_parameter" "vpc_id" {
  name = "/infrastructure/networking/vpc_id"
}

data "aws_ssm_parameter" "private_subnets" {
  name = "/infrastructure/networking/private_subnet_ids"
}`})})]}),(0,t.jsx)("p",{className:"text-secondary",children:"SSM Parameter Store is preferred because it decouples the consumer from the producer's state backend configuration. If the VPC team migrates their state to a different bucket, consumers don't need to update anything."}),(0,t.jsx)("h2",{id:"workspace-patterns",className:"h3 mt-5 mb-3 text-info",children:"Workspace Patterns for Environments"}),(0,t.jsx)("p",{className:"text-secondary",children:"Terraform workspaces provide isolated state within the same configuration. They're useful for managing multiple environments (dev, staging, prod) from a single codebase, but they come with trade-offs."}),(0,t.jsxs)("div",{className:"custom-card p-4 my-4",children:[(0,t.jsxs)("h5",{className:"text-info mb-3",children:[(0,t.jsx)("i",{className:"bi bi-signpost-split me-2"}),"Workspaces vs. Directory Separation"]}),(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-borderless text-secondary",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Approach"}),(0,t.jsx)("th",{children:"Pros"}),(0,t.jsx)("th",{children:"Cons"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Workspaces"})}),(0,t.jsx)("td",{children:"DRY code, single source of truth"}),(0,t.jsx)("td",{children:"All envs share same config, risky blast radius"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Directories"})}),(0,t.jsx)("td",{children:"Full isolation, independent deploys"}),(0,t.jsx)("td",{children:"Code duplication, drift between envs"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:"Hybrid"})}),(0,t.jsx)("td",{children:"Shared modules, env-specific roots"}),(0,t.jsx)("td",{children:"More repo structure to maintain"})]})]})]})})]}),(0,t.jsx)("p",{className:"text-secondary",children:"The hybrid approach works best at scale: shared modules define the “what” while environment-specific root modules define the “how much” and “where.”"}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"Hybrid structure"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`infrastructure/
├── modules/                    # Shared, versioned modules
│   ├── vpc/
│   ├── eks-cluster/
│   └── rds-instance/
├── environments/
│   ├── dev/
│   │   ├── main.tf             # module "vpc" { source = "../../modules/vpc" }
│   │   ├── terraform.tfvars    # instance_type = "t3.medium"
│   │   └── backend.tf          # key = "dev/platform/terraform.tfstate"
│   ├── staging/
│   │   ├── main.tf
│   │   ├── terraform.tfvars    # instance_type = "t3.large"
│   │   └── backend.tf          # key = "staging/platform/terraform.tfstate"
│   └── prod/
│       ├── main.tf
│       ├── terraform.tfvars    # instance_type = "m5.xlarge"
│       └── backend.tf          # key = "prod/platform/terraform.tfstate"`})})]}),(0,t.jsx)("h2",{id:"state-locking",className:"h3 mt-5 mb-3 text-info",children:"State Locking Deep Dive"}),(0,t.jsxs)("p",{className:"text-secondary",children:["State locking prevents concurrent operations on the same state file. Without it, two simultaneous ",(0,t.jsx)("code",{children:"terraform apply"})," runs can corrupt state irreversibly."]}),(0,t.jsx)("h3",{id:"when-locks-go-wrong",className:"h5 mt-4 mb-3",children:"When Locks Go Wrong"}),(0,t.jsx)("p",{className:"text-secondary",children:"Sometimes a Terraform run crashes or is interrupted, leaving a stale lock. Here's how to handle it safely:"}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"Handling stale locks"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`# Step 1: Verify the lock is actually stale
# Check who holds it and when it was acquired
aws dynamodb get-item \\
  --table-name terraform-state-locks \\
  --key '{"LockID": {"S": "acme-terraform-state/networking/vpc/terraform.tfstate-md5"}}' \\
  --output json | jq '.Item.Info.S | fromjson'

# Step 2: Confirm no active Terraform process is running
# Check CI/CD pipelines and ask the team

# Step 3: Force unlock only when certain
terraform force-unlock LOCK_ID

# NEVER force-unlock without verifying steps 1 and 2`})})]}),(0,t.jsx)("h2",{id:"safe-state-migration",className:"h3 mt-5 mb-3 text-info",children:"Safe State Migration"}),(0,t.jsx)("p",{className:"text-secondary",children:"Moving resources between state files is one of the riskiest Terraform operations. A mistake can cause Terraform to destroy and recreate production resources. Here's a safe procedure."}),(0,t.jsx)("h3",{id:"migration-procedure",className:"h5 mt-4 mb-3",children:"Migration Procedure"}),(0,t.jsxs)("ol",{className:"text-secondary",children:[(0,t.jsx)("li",{children:"Take a snapshot of both source and destination state files"}),(0,t.jsxs)("li",{children:["Run ",(0,t.jsx)("code",{children:"terraform plan"})," on both to confirm clean state"]}),(0,t.jsxs)("li",{children:["Move resources using ",(0,t.jsx)("code",{children:"terraform state mv"})]}),(0,t.jsxs)("li",{children:["Run ",(0,t.jsx)("code",{children:"terraform plan"})," on both again—expect no changes"]}),(0,t.jsx)("li",{children:"If plan shows changes, restore from snapshot and investigate"})]}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"State migration example"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`#!/bin/bash
set -euo pipefail

# 1. Snapshot current state
echo "Taking state snapshots..."
cd infrastructure/monolith
terraform state pull > /tmp/monolith-state-backup.json

cd ../networking/vpc
terraform state pull > /tmp/vpc-state-backup.json

# 2. Verify clean plans
echo "Verifying clean state..."
cd ../../monolith
terraform plan -detailed-exitcode  # Exit code 0 = no changes

cd ../networking/vpc
terraform plan -detailed-exitcode

# 3. Move resources
echo "Moving VPC resources..."
cd ../../monolith
terraform state mv \\
  -state-out=../networking/vpc/terraform.tfstate \\
  'aws_vpc.main' 'aws_vpc.main'

terraform state mv \\
  -state-out=../networking/vpc/terraform.tfstate \\
  'aws_subnet.private' 'aws_subnet.private'

# 4. Verify both states show no changes
echo "Verifying migration..."
terraform plan -detailed-exitcode

cd ../networking/vpc
terraform plan -detailed-exitcode

echo "Migration complete. Both states are clean."`})})]}),(0,t.jsxs)("div",{className:"custom-card p-4 my-4",children:[(0,t.jsxs)("h5",{className:"text-info mb-3",children:[(0,t.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Migration Safety Checklist"]}),(0,t.jsxs)("ul",{className:"text-secondary mb-0",children:[(0,t.jsx)("li",{children:"Always back up state files before any migration"}),(0,t.jsx)("li",{children:"Run migrations during a maintenance window—no concurrent applies"}),(0,t.jsxs)("li",{children:["Use ",(0,t.jsx)("code",{children:"-lock=true"})," (the default) to hold locks during migration"]}),(0,t.jsx)("li",{children:"Test the migration in a non-production environment first"}),(0,t.jsx)("li",{children:"Have a rollback plan: restoring the state snapshot"})]})]}),(0,t.jsx)("h2",{id:"access-control",className:"h3 mt-5 mb-3 text-info",children:"Access Control for State"}),(0,t.jsx)("p",{className:"text-secondary",children:"Not everyone should have write access to production state. Use S3 bucket policies and IAM to enforce least-privilege access."}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:"IAM policy for state access"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowStateRead",
      "Effect": "Allow",
      "Action": ["s3:GetObject", "s3:ListBucket"],
      "Resource": [
        "arn:aws:s3:::acme-terraform-state",
        "arn:aws:s3:::acme-terraform-state/*"
      ]
    },
    {
      "Sid": "AllowProdStateWrite",
      "Effect": "Allow",
      "Action": ["s3:PutObject", "s3:DeleteObject"],
      "Resource": "arn:aws:s3:::acme-terraform-state/prod/*",
      "Condition": {
        "StringEquals": {
          "aws:PrincipalTag/team": "platform"
        }
      }
    },
    {
      "Sid": "AllowDevStateWrite",
      "Effect": "Allow",
      "Action": ["s3:PutObject", "s3:DeleteObject"],
      "Resource": "arn:aws:s3:::acme-terraform-state/dev/*"
    }
  ]
}`})})]}),(0,t.jsxs)("p",{className:"text-secondary",children:["This policy allows all engineers to read any state (useful for ",(0,t.jsx)("code",{children:"terraform_remote_state"})," lookups) but restricts production state writes to the platform team. Dev state is open for all engineers to modify."]}),(0,t.jsx)("h2",{id:"ci-cd-integration",className:"h3 mt-5 mb-3 text-info",children:"CI/CD Integration"}),(0,t.jsx)("p",{className:"text-secondary",children:"Running Terraform from CI/CD pipelines enforces consistency and provides audit trails. Here's a GitHub Actions workflow pattern that separates plan from apply."}),(0,t.jsxs)("div",{className:"terminal-card my-4",children:[(0,t.jsxs)("div",{className:"terminal-header",children:[(0,t.jsx)("div",{className:"terminal-dot terminal-dot-red"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-yellow"}),(0,t.jsx)("div",{className:"terminal-dot terminal-dot-green"}),(0,t.jsx)("span",{className:"ms-3 text-secondary small",children:".github/workflows/terraform.yml"})]}),(0,t.jsx)("div",{className:"terminal-body",children:(0,t.jsx)("pre",{className:"text-success mb-0",children:`name: Terraform
on:
  pull_request:
    paths: ['infrastructure/**']
  push:
    branches: [main]
    paths: ['infrastructure/**']

jobs:
  plan:
    runs-on: ubuntu-latest
    if: github.event_name == 'pull_request'
    steps:
      - uses: actions/checkout@v4
      - uses: hashicorp/setup-terraform@v3

      - name: Terraform Plan
        run: |
          cd infrastructure/environments/\${{ matrix.environment }}
          terraform init
          terraform plan -out=tfplan -no-color
        env:
          AWS_ACCESS_KEY_ID: \${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: \${{ secrets.AWS_SECRET_ACCESS_KEY }}

      - name: Post plan to PR
        uses: actions/github-script@v7
        with:
          script: |
            // Post terraform plan output as PR comment

  apply:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment: production  # Requires manual approval
    steps:
      - uses: actions/checkout@v4
      - uses: hashicorp/setup-terraform@v3

      - name: Terraform Apply
        run: |
          cd infrastructure/environments/\${{ matrix.environment }}
          terraform init
          terraform apply -auto-approve`})})]}),(0,t.jsx)("h2",{id:"key-takeaways",className:"h3 mt-5 mb-3 text-info",children:"Key Takeaways"}),(0,t.jsxs)("ol",{className:"text-secondary",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Never use local state in production:"})," Remote backends with locking are non-negotiable for team environments"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Decompose state by lifecycle:"})," Resources that change at different rates should live in separate state files"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Prefer SSM over remote_state:"})," Loose coupling between state files reduces blast radius and simplifies refactoring"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Use the hybrid approach:"})," Shared modules with environment-specific roots give you DRY code and full isolation"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Treat state migration as a production change:"})," Back up, verify, migrate, verify again"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Enforce access control on state:"})," Production state writes should be restricted to authorized teams and CI/CD pipelines"]})]}),(0,t.jsx)("h2",{id:"conclusion",className:"h3 mt-5 mb-3 text-info",children:"Conclusion"}),(0,t.jsx)("p",{className:"text-secondary",children:"Terraform state management is not glamorous, but getting it wrong can bring production down. The patterns covered here—remote backends, state decomposition, safe migrations, and access control—form the foundation for scaling infrastructure as code across teams and environments. Invest in this foundation early, and your future self will thank you when the organization grows from 5 services to 50."}),(0,t.jsx)("div",{className:"custom-card p-4 mt-5",children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)("div",{className:"icon-box me-3",style:{width:"60px",height:"60px"},children:(0,t.jsx)("i",{className:"bi bi-person fs-3"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h5",{className:"mb-1",children:r.siteConfig.author.name}),(0,t.jsx)("p",{className:"text-secondary mb-0 small",children:"Staff DevOps Engineer specializing in infrastructure as code, Kubernetes, and platform engineering."})]})]})}),(0,t.jsxs)("div",{className:"d-flex justify-content-between mt-5 pt-4 border-top border-secondary",children:[(0,t.jsxs)(s.default,{href:"/blog/argocd-multi-cluster-patterns",className:"btn btn-outline-custom",children:[(0,t.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Previous Post"]}),(0,t.jsxs)(s.default,{href:"/blog",className:"btn btn-gradient",children:["All Posts",(0,t.jsx)("i",{className:"bi bi-arrow-right ms-2"})]})]})]})]})]})})}),(0,t.jsx)("footer",{className:"footer py-4",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"row align-items-center",children:[(0,t.jsx)("div",{className:"col-md-6 text-center text-md-start mb-3 mb-md-0",children:(0,t.jsxs)("span",{className:"text-secondary",style:{fontFamily:"monospace"},children:[(0,t.jsx)("span",{className:"text-info",children:">"})," Built with Next.js & Bootstrap"]})}),(0,t.jsx)("div",{className:"col-md-6 text-center text-md-end",children:(0,t.jsxs)("span",{className:"text-secondary",style:{fontFamily:"monospace"},children:["© ",new Date().getFullYear()," ",r.siteConfig.author.name]})})]})})})]})}e.s(["default",()=>l])}]);