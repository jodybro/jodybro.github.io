(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52216,e=>{"use strict";var t=class{constructor(e,t,i,r={}){this._terminal=e,this._regex=t,this._handler=i,this._options=r}provideLinks(e,t){let r=i.computeLink(e,this._regex,this._terminal,this._handler);t(this._addCallbacks(r))}_addCallbacks(e){return e.map(e=>(e.leave=this._options.leave,e.hover=(t,i)=>{if(this._options.hover){let{range:r}=e;this._options.hover(t,i,r)}},e))}},i=class e{static computeLink(t,i,r,n){let s=RegExp(i.source,(i.flags||"")+"g"),[o,l]=e._getWindowedLineStrings(t-1,r),a=o.join(""),h,c=[];for(;h=s.exec(a);){let t=h[0];if(!function(e){try{let t=new URL(e),i=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(i.toLocaleLowerCase())}catch{return!1}}(t))continue;let[i,s]=e._mapStrIdx(r,l,0,h.index),[o,a]=e._mapStrIdx(r,i,s,t.length);if(-1===i||-1===s||-1===o||-1===a)continue;let d={start:{x:s+1,y:i+1},end:{x:a,y:o+1}};c.push({range:d,text:t,activate:n})}return c}static _getWindowedLineStrings(e,t){let i,r=e,n=e,s=0,o="",l=[];if(i=t.buffer.active.getLine(e)){let e=i.translateToString(!0);if(i.isWrapped&&" "!==e[0]){for(s=0;(i=t.buffer.active.getLine(--r))&&s<2048&&(s+=(o=i.translateToString(!0)).length,l.push(o),!(!i.isWrapped||-1!==o.indexOf(" "))););l.reverse()}for(l.push(e),s=0;(i=t.buffer.active.getLine(++n))&&i.isWrapped&&s<2048&&(s+=(o=i.translateToString(!0)).length,l.push(o),-1===o.indexOf(" ")););}return[l,r]}static _mapStrIdx(e,t,i,r){let n=e.buffer.active,s=n.getNullCell(),o=i;for(;r;){let e=n.getLine(t);if(!e)return[-1,-1];for(let i=o;i<e.length;++i){e.getCell(i,s);let o=s.getChars();if(s.getWidth()&&(r-=o.length||1,i===e.length-1&&""===o)){let e=n.getLine(t+1);e&&e.isWrapped&&(e.getCell(0,s),2===s.getWidth()&&(r+=1))}if(r<0)return[t,i]}t++,o=0}return[t,o]}},r=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function n(e,t){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var s=class{constructor(e=n,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let i=this._options,n=i.urlRegex||r;this._linkProvider=this._terminal.registerLinkProvider(new t(this._terminal,n,this._handler,i))}dispose(){this._linkProvider?.dispose()}};e.s(["WebLinksAddon",()=>s])}]);